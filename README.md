## Table of Contents
1. [문서 개요](#1--문서-개요)
     * [목적](#11--목적)
     * [범위](#12--범위)
     * [참고자료](#13--참고자료)
2. [포탈](#2--포탈)
     * [아키텍처 요구사항](#21--아키텍처-요구사항)
     * [아키텍처 개요](#22--아키텍처-개요)
     * [포탈 아키텍처](#221--포탈-아키텍처)


#1.  문서 개요

## 1.1.  목적

본 문서는 Open PaaS 플랫폼 아키텍처를 정의하는 문서로서, Open PaaS 플랫폼의 요구사항을 정의하고, 이를 실현하기 위한 플랫폼의 기술 구조 및 동작 매커니즘을 정의한다.


## 1.2.  범위

본 문서는 Open PaaS 플랫폼 구축 전체 범위 중 2차 사업 구축 범위를 대상으로 작성한다. 상세 구축 범위는 “2.2. 서비스 아키텍처”를 참조한다.

본 문서는 다음과 같은 내용들을 포함한다.
-   Open PaaS 비즈니스 컨텍스트 
-   Open PaaS 서비스 아키텍처
-   Open PaaS 영역별 아키텍처 요구사항
-   Open PaaS 영역별 어플리케이션 아키텍처
-   Open PaaS 영역별 데이터 아키텍처
-   Open PaaS 영역별 기술 아키텍처


## 1.3.  참고자료

본 문서는 Cloud Foundry의 BOSH Document를 참고로 작성하였다.

-   Diego Design Notes
[https://github.com/cloudfoundry-incubator/diego-design-notes]

-    Cloud Foundry Documentation
[http://docs.cloudfoundry.org/]


#2.	포탈

## 2.1.	 아키텍처 요구사항

유스케이스 명세를 기준으로 포탈이 제공하는 아키텍처 요건은 다음과 같다.

<사용자 포탈>
- F01. 시스템은 PaaS-TA의 연결 정보 및 인증 정보, 목표 스페이스를 등록하고 해당 정보를 통해 PaaS-TA 연결을 지원한다.
- F02. 시스템은 연결된 PaaS-TA의 목표 스페이스 내의 애플리케이션 목록을 조회하고, 특정 애플리케이션의 상세 정보 조회를 지원한다.
- F03. 시스템은 WEB-IDE에서 개발하는 배포 가능한 프로젝트(동적 웹 프로젝트)를 연결된 PaaS-TA의 목표 스페이스에 배포를 지원한다.
- F04. 시스템은 배포된 애플리케이션의 상태 제어 기능을 제공한다.
- F05. 시스템은 배포된 애플리케이션의 라우트, 환경 변수, 메모리 사용량을 조회하거나, 수정을 지원한다.
- F06. 시스템은 목표 스페이스에 PaaS-TA에서 사용할 수 있는 서비스팩을 조회하여 서비스팩 인스턴스 생성 및 애플리케이션과 서비스팩 인스턴스 바인딩을 지원한다.
- F07. 시스템은 연결된 PaaS-TA의 목표 스페이스 내의 서비스팩 인스턴스를 조회를 지원한다.
- F08. 시스템은 배포된 애플리케이션 모니터링 및 Auto-Scaling을 지원한다.
- F09. 시스템은 기술문서, 도움말, 문의사항을 등록 및 조회를 지원한다.
- F10. 시스템은 공지사항 및 커뮤니티 게시판 기능을 지원한다.

<운영자 포탈>
- F01. 시스템은 사용자 정보 조회, 삭제 및 비밀번호 재설정 등 관리 기능을 제공한다.
- F02. 시스템은 관리자 계정 정보 조회, 생성, 수정, 삭제 등 관리 기능을 제공한다.
- F03. 시스템은 클라이언트 정보 조회, 생성, 수정, 삭제 등 관리 기능을 제공한다.
- F04. 시스템은 조직 및 스페이스 정보 조회 기능을 제공한다.
- F05. 시스템은 권한정보 조회, 사용자 권한그룹 생성, 수정, 삭제 등 관리 기능을 제공한다.
- F06. 시스템은 서비스 카탈로그 정보 조회, 생성, 수정, 삭제 및 카탈로그에 서비스를 추가, 삭제 수정 기능을 제공한다.
- F07. 시스템은 실행환경 카탈로그 정보 조회, 생성, 수정, 삭제 및 카탈로그에 빌드팩을 추가, 삭제 수정 기능을 제공한다.
- F08. 시스템은 스타터 카탈로그 정보 조회, 생성, 수정, 삭제 및 스타터에 서비스 및 빌드팩을 추가, 삭제 수정 기능을 제공한다.
- F09. 시스템은 설정 정보 관리 기능을 제공한다.
- F10. 시스템은 코드 정보 조회, 생성, 수정, 삭제 등 관리 기능을 제공한다.
- F11. 시스템은 App 코드 정보 조회, 생성, 수정, 삭제 등 관리 기능을 제공한다.
- F12. 시스템은 메뉴 정보 조회, 생성, 수정, 삭제 및 메뉴에 권한 등록 등 관리 기능을 제공한다.
- F13. 시스템은 관리자 대시보드, VM별 모니터링 및 IaaS 모니터링 기능을 제공한다.
- F14. 시스템은 플랫폼 관리자 역할의 계정으로 로그인하여 사용자를 인증하고, 로그아웃 기능을 제공한다.


## 2.2.	 아키텍처 개요

### 2.2.1.  포탈 아키텍처

사용자 포탈은 어플리케이션의 배포 및 관리, 개발에 필요한 서비스 인스턴스 관리 및 계정관리와 공지사항 같은 포탈 관리 기능을 제공한다. 또한 어플리케이션 플랫폼에 배포되는 응용어플리케이션을 대한 모니터링을 제공하여 응용어플리케이션이 문제가 있는 부분을 포탈 사용자 관리자에게 제공하여 원활한 운영을 할 수 있게 지원한다.

운영자 포탈은 CCDB, UAADB, PORTALDB로부터 데이터를 조회하고 클라우드 컨트롤러에서 제공하는 REST API 호출을 통해 상호작용하며, 웹 사용자 인터페이스 환경에서 플랫폼을 관리할 수 있도록 한다.

다음은 각 구성 요소의 주요 역할과 기술 구조는 다음과 같다. 
 
1)	portal-web-user

사용자 포탈은 웹 인터페이스를 통해 PaaS-TA에서 개발자 환경을 구성 할 수 있도록 하는 웹 애플리케이션이다. 
portal-api 어플리케이션의 REST API 를 호출하여 그 결과를 화면에 제공한다. 화면을 분리하여 UI 프레임워크 변경 시 API 서버와 영향도가 없이 구성한다.

2)	portal-web-admin

운영자 포탈은 웹 인터페이스를 통해 PaaS-TA 운영환경의 데이터를 관리할 수 있도록 하는 웹 애플리케이션이다. 
portal-api 어플리케이션의 REST API 를 호출하여 그 결과를 화면에 제공한다. 화면을 분리하여 UI 프레임워크 변경 시 API 서버와 영향도가 없이 구성한다.

3)	portal-api

PaaS-TA 실행환경의 Cloud Controller에서 제공하는 Java CF 1.0 LIB REST API와 포탈에서 필요한 REST API를 제공한다.

4)	portal-registration

Spring-cloud 프로젝트의 Service discovery server로 Eureka 를 사용한 어플리케이션이다. 
포탈에서 사용하는 어플리케이션을 portal-registration 에 서비스로 등록하여 등록된 서비스들은 registration 서버에 등록한 서비스 이름으로 데이터를 요청한다. 또한 등록된 서비스들의 상태를 확인 할 수 있는 UI를 제공한다.

5)	portal-api-v2

PaaS-TA 실행환경의 Cloud Controller에서 제공하는 Java CF 2.0 LIB REST API를 제공한다.

6)	app-autoscaler

Monitoring 서버를 통해 배포된 어플리케이션의 Auto Scale를 위한 Metrix 정보를 수집하고 사용자 포탈에서 설정한 Auto scale 조건과 비교하여 scale 여부를 판단하고 scale-in/out 를 수행하는 어플리케이션이다.
